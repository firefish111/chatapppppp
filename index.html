<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket.IO chat</title>
    <style>
      @import url('https://fonts.googleapis.com/css?family=Montserrat&display=swap');
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
      #chat_form { background: #FFF; padding: 3px; position: fixed; bottom: 0; width: 100%; border: black; border-radius: 20px}
      #chat_input { border-radius: 20px; border: black solid 1px; padding: 10px; width: 90%; margin-right: .5%; }
      #chat_input:focus { outline: none; border-radius: 20px; border: black solid 1px; padding: 10px; width: 90%; margin-right: .5%; }
      #chat_button { width: 9%; background: blue; border: none; padding: 10px; border-radius: 20px; transition: background 0.5s;}
      #chat_button:hover { width: 9%; background: darkblue; border: none; padding: 10px; border-radius: 20px;}
      #chat_button:focus { outline: none;}
      #sign_in_background {position:fixed; left:0%; top:0%; width:100%; height:100%; background: silver}
      #sign_in_input {position:fixed; width:50%; height:25%; left:25%; top:37.5%; border-radius:100px; background:white}
      #sign_in_input:focus {outline:none}
      #play_button {font-size:20px; position:fixed; left:25%; top:65%; height:15%; width: 50%; background: blue; border: none; padding: 10px; border-radius: 100px; transition: background 0.5s;}
      #play_button:hover {font-size:20px; position:fixed; left:25%; top:65%; height:15%; width: 50%; background: darkblue; border: none; padding: 10px; border-radius: 100px; transition: background 0.5s;}
      #play_button:focus {outline:none}
      
    </style>
  </head>
  <body>
    <div id="messages" style="overflow-y:scroll;position:fixed; bottom:10%; width:100%;height:calc(100% - 80px); border-radius:20px; border:1px solid grey; font-family: Montserrat; padding: 15px" />
    <form id="chat_form" action="">
      <input id="chat_input" autocomplete="off" /><button id="chat_button">Send</button>
    </form>
    <div id="sign_in_background" />
    <form id = "sign_in_form" action="">
      <input id="sign_in_input" placeholder="Type your username" id="sign_in_form" style="border:none; font-size:50px; padding-left:30px">
      <button id = "play_button">Play</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
    var user = "";
    $(function () {
      var socket = io();
      $('#chat_form').submit(function(e){
        e.preventDefault(); // prevents page reloading
        socket.emit('chat message', $('#chat_input').val(), $('#sign_in_input').val());
        $('#chat_input').val('');
        return false;
      });
      $('#sign_in_form').submit(function(e){
        e.preventDefault();
        console.log('Username set');
        var use = $('#sign_in_input').val();
        socket.emit('sign in', use);
      })
      socket.on('chat message', function(msg, use){
        $('#messages').append(use + ": " + msg + "<br>");
        $('#messages').scrollTop($('#messages').height());
      });
      socket.on('connected', function(){
        $('#messages').append("A user has connected.<br>");
      });
      socket.on('sign in', function (username){
        $('#sign_in_background').hide();
      });
    });
    </script>
  </body>
</html>